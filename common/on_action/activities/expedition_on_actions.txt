set_up_base_camp_events = {
	trigger = {
		exists = scope:activity
		involved_activity.activity_host ?= this
	}
	events = {
		expedition.001 # Set up base camp
	}
}

expedition_events = {
	trigger = {
		is_ai = no
		AND = {
			exists = scope:activity
			NOT = {
				scope:activity.var:status = flag:expedition_is_over
			}
		}
		involved_activity.activity_host ?= this
	}

	effect = {
		if = {
			limit = {
				NOT = { has_global_variable = 01_sigil_of_the_realm_lord_found }
			}
			trigger_event = expedition.006901
		}
		else = {
			random_list = {
				30 = { # Nothing
					trigger_event = expedition.002
				}
				5 = { # Hazard
					trigger_event = expedition.003
				}
				15 = { # Minor Artifact
					trigger_event = expedition.004
				}
				15 = { # Some Gold
					trigger_event = expedition.0041
				}
				0 = { # Trial
					modifier = { # No Trials attempted
						add = 40
						OR = {
							AND = {
								exists = scope:activity.var:trial_attempted
								NOT = {
									scope:activity.var:trial_attempted = flag:true
								}
							}
							NOT = {
								exists = scope:activity.var:trial_attempted
							}
						}
					}
					modifier = { # No Trial attempted (Increased Trial Odds from tradition_adventurer_guilds)
						add = 40
						culture = {
							has_cultural_tradition = tradition_adventurer_guilds
						}
						OR = {
							AND = {
								exists = scope:activity.var:trial_attempted
								NOT = {
									scope:activity.var:trial_attempted = flag:true
								}
							}
							NOT = {
								exists = scope:activity.var:trial_attempted
							}
						}
					}
					modifier = { # First Trial Attempted, Adventure Guilds Second Trial Chance activated
						add = 40
						culture = {
							has_cultural_tradition = tradition_adventurer_guilds
						}
						AND = {
							exists = scope:activity.var:trial_attempted
							scope:activity.var:trial_attempted = flag:true
						}
						OR = {
							AND = {
								exists = scope:activity.var:second_trial_attempted
								NOT = {
									scope:activity.var:second_trial_attempted = flag:true
								}
							}
							NOT = {
								exists = scope:activity.var:second_trial_attempted
							}
						}
						
					}


					trigger_event = expedition.0051
				}
			}
		}
	}
}

on_activate_holy_site = {
	effect = {
		if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ruins_of_valfuria
			}
			root.faith = {
				activate_holy_site = ruins_of_valfuria
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:spire_citadel
			}
			root.faith = {
				activate_holy_site = spire_citadel
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:proving_fields
			}
			root.faith = {
				activate_holy_site = proving_fields
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:fortress_tomb_of_the_dead_emperor
			}
			root.faith = {
				activate_holy_site = fortress_tomb_of_the_dead_emperor
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:volcanic_forge
			}
			root.faith = {
				activate_holy_site = volcanic_forge
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:high_harbor
			}
			root.faith = {
				activate_holy_site = high_harbor
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:citadel_of_bear_king_thul
			}
			root.faith = {
				activate_holy_site = citadel_of_bear_king_thul
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:archipelago_of_duck_duke_vega
			}
			root.faith = {
				activate_holy_site = archipelago_of_duck_duke_vega
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:tomb_of_ale_the_dragon_slayer
			}
			root.faith = {
				activate_holy_site = tomb_of_ale_the_dragon_slayer
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ruins_of_the_runic_city_of_anundshog
			}
			root.faith = {
				activate_holy_site = ruins_of_the_runic_city_of_anundshog
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:tomb_of_the_lights_champions
			}
			root.faith = {
				activate_holy_site = tomb_of_the_lights_champions
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:black_palace_of_dark_queen_hekla
			}
			root.faith = {
				activate_holy_site = black_palace_of_dark_queen_hekla
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:newgrange_temple
			}
			root.faith = {
				activate_holy_site = newgrange_temple
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:burrens_bastion
			}
			root.faith = {
				activate_holy_site = burrens_bastion
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:skip_gates_of_camelot
			}
			root.faith = {
				activate_holy_site = skip_gates_of_camelot
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:great_obelisk_of_the_pictish
			}
			root.faith = {
				activate_holy_site = great_obelisk_of_the_pictish
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:labyrinth_gateway_of_the_altamirans
			}
			root.faith = {
				activate_holy_site = labyrinth_gateway_of_the_altamirans
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:grazing_villages_of_the_great_herds
			}
			root.faith = {
				activate_holy_site = grazing_villages_of_the_great_herds
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:hunting_grounds_of_the_greater_drakes
			}
			root.faith = {
				activate_holy_site = hunting_grounds_of_the_greater_drakes
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_city_of_glanum
			}
			root.faith = {
				activate_holy_site = ancient_city_of_glanum
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_mega_city_of_myropillya
			}
			root.faith = {
				activate_holy_site = ancient_mega_city_of_myropillya
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:temple_of_the_mages_court
			}
			root.faith = {
				activate_holy_site = temple_of_the_mages_court
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:seat_of_the_storm_king
			}
			root.faith = {
				activate_holy_site = seat_of_the_storm_king
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:cradle_of_the_first_elves
			}
			root.faith = {
				activate_holy_site = cradle_of_the_first_elves
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:apadana_palace
			}
			root.faith = {
				activate_holy_site = apadana_palace
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_city_of_bosra
			}
			root.faith = {
				activate_holy_site = ancient_city_of_bosra
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_city_of_babylon
			}
			root.faith = {
				activate_holy_site = ancient_city_of_babylon
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:library_of_alexandria
			}
			root.faith = {
				activate_holy_site = library_of_alexandria
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:harkonnens_foley
			}
			root.faith = {
				activate_holy_site = harkonnens_foley
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:shattered_spire_of_veldric
			}
			root.faith = {
				activate_holy_site = shattered_spire_of_veldric
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:the_grand_blood_alter
			}
			root.faith = {
				activate_holy_site = the_grand_blood_alter
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:labyrinth_gateway_of_the_ajantas
			}
			root.faith = {
				activate_holy_site = labyrinth_gateway_of_the_ajantas
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_holy_city_of_madurai
			}
			root.faith = {
				activate_holy_site = ancient_holy_city_of_madurai
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_fortress_of_mahasthangarh
			}
			root.faith = {
				activate_holy_site = ancient_fortress_of_mahasthangarh
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:mythical_spiritual_kingdom_of_shambhala
			}
			root.faith = {
				activate_holy_site = mythical_spiritual_kingdom_of_shambhala
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:domain_of_the_forest_spirit_eleke_sazy
			}
			root.faith = {
				activate_holy_site = domain_of_the_forest_spirit_eleke_sazy
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:ancient_faerie_groves
			}
			root.faith = {
				activate_holy_site = ancient_faerie_groves
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:overwatch_fortress
			}
			root.faith = {
				activate_holy_site = overwatch_fortress
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:wraith_wood
			}
			root.faith = {
				activate_holy_site = wraith_wood
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:matrons_hollow
			}
			root.faith = {
				activate_holy_site = matrons_hollow
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:sealed_magic_armoury
			}
			root.faith = {
				activate_holy_site = sealed_magic_armoury
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:whisper_wood
			}
			root.faith = {
				activate_holy_site = whisper_wood
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:light_reach_citadel
			}
			root.faith = {
				activate_holy_site = light_reach_citadel
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:east_flaria
			}
			root.faith = {
				activate_holy_site = east_flaria
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:west_flaria
			}
			root.faith = {
				activate_holy_site = west_flaria
			}
		}
		else_if = {
			limit = {
				scope:activity.activity_location.barony.var:expedition_holy_site = flag:wratislaw_magi_academy
			}
			root.faith = {
				activate_holy_site = wratislaw_magi_academy
			}
		}
	}
}